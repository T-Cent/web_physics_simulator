<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Babylon.js - Bouncing Ball</title>
    <style>
      html, body {
        width: 100%;
        height: 100%;
        margin: 0;
        overflow: hidden;
      }
      canvas {
        width: 100%;
        height: 100%;
        touch-action: none;
      }
    </style>
    <!-- Load Babylon.js and Cannon.js via CDN -->
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
    <script src="https://cdn.babylonjs.com/cannon.js"></script>
  </head>
  <body>
    <canvas id="renderCanvas"></canvas>
    <script>
      // Get the canvas element
      const canvas = document.getElementById("renderCanvas");

      // Create the Babylon engine
      const engine = new BABYLON.Engine(canvas, true);

      // Create the scene
      const createScene = function () {
        const scene = new BABYLON.Scene(engine);

        // Enable physics using CannonJS
        const gravity = new BABYLON.Vector3(0, -9.81, 0);
        const physicsPlugin = new BABYLON.CannonJSPlugin();
        scene.enablePhysics(gravity, physicsPlugin);

        // Set up an ArcRotateCamera
        const camera = new BABYLON.ArcRotateCamera("camera", Math.PI / 2, Math.PI / 4, 20, BABYLON.Vector3.Zero(), scene);
        camera.attachControl(canvas, true);

        // Create a Hemispheric light
        const light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(1, 1, 0), scene);

        // Create a ground plane
        const ground = BABYLON.MeshBuilder.CreateGround("ground", { width: 20, height: 20 }, scene);
        const groundMat = new BABYLON.StandardMaterial("groundMat", scene);
        groundMat.diffuseColor = new BABYLON.Color3(0.5, 0.5, 0.5);
        ground.material = groundMat;
        
        // Add a physics impostor to the ground (static body)
        ground.physicsImpostor = new BABYLON.PhysicsImpostor(
          ground,
          BABYLON.PhysicsImpostor.BoxImpostor,
          { mass: 0, friction: 0.5, restitution: 0.7 },
          scene
        );

        // Create a sphere (ball)
        const sphere = BABYLON.MeshBuilder.CreateSphere("sphere", { diameter: 2, segments: 32 }, scene);
        sphere.position = new BABYLON.Vector3(0, 10, 0);
        const sphereMat = new BABYLON.StandardMaterial("sphereMat", scene);
        sphereMat.diffuseColor = new BABYLON.Color3(1, 0, 0);
        sphere.material = sphereMat;
        
        // Add a physics impostor to the sphere (dynamic body)
        sphere.physicsImpostor = new BABYLON.PhysicsImpostor(
          sphere,
          BABYLON.PhysicsImpostor.SphereImpostor,
          { mass: 1, friction: 0.2, restitution: 0.9 },
          scene
        );

        return scene;
      };

      // Create the scene
      const scene = createScene();

      // Render loop
      engine.runRenderLoop(function () {
        scene.render();
      });

      // Resize the engine on window resize
      window.addEventListener("resize", function () {
        engine.resize();
      });
    </script>
  </body>
</html>
